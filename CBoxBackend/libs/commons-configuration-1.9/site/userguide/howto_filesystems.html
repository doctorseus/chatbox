<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Aug 4, 2012 ( $Revision: 1080083 $ ) -->
<!-- $HeadURL: https://svn.apache.org/repos/asf/commons/proper/commons-skin/trunk/src/main/resources/META-INF/maven/site.vm $ -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>
  File Systems</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
      <meta name="author" content="Ralph Goers" />
    <meta name="Date-Revision-yyyymmdd" content="20120804" />
    <meta http-equiv="Content-Language" content="en" />
                                                    
<link rel="stylesheet" type="text/css" media="all" href="../css/prettify.css"/>                                                        
<script src="../js/prettify.js" type="text/javascript"></script>                                                        
<script type="text/javascript">window.onload=function() {
            prettyPrint();
        }</script>                      
        </head>
  <body class="composite">
    <div id="banner">
            <div id="bannerLeft">
                                            <a href="http://commons.apache.org/" title="Apache Commons logo">
                                        <img src="../images/commons-logo.png" alt="Apache Commons logo"/>
                </a>
            </div><!-- id="bannerLeft" -->
              <div id="bannerRight">
                                                          <a href="../index.html">
                                                <img src="../images/logo.png" alt="Commons Configuration"/>
                </a>
            </div><!-- id="bannerRight" -->
        <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                <div class="xleft">
        <span id="publishDate">Last Published: 04 August 2012</span>
                  &nbsp;| <span id="projectVersion">Version: 1.9</span>
                      </div>
            <div class="xright">                    <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">ApacheCon</a>
            |
                        <a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a>
            |
                        <a href="../../" title="Commons">Commons</a>
              
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Configuration</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../download_configuration.cgi" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../changes-report.html" title="Release History">Release History</a>
            </li>
                  <li class="none">
                          <a href="../userguide/user_guide.html" title="User's Guide">User's Guide</a>
            </li>
                  <li class="none">
                          <a href="../dependencies.html" title="Runtime Dependencies">Runtime Dependencies</a>
            </li>
                  <li class="none">
                          <a href="../apidocs/index.html" title="Javadoc">Javadoc</a>
            </li>
          </ul>
                       <h5>Development</h5>
                  <ul>
                  <li class="none">
                          <a href="../building.html" title="Building">Building</a>
            </li>
                  <li class="none">
                          <a href="../issue-tracking.html" title="Issue Tracking">Issue Tracking</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                    <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Commons</h5>
                  <ul>
                  <li class="none">
                          <a href="../../" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/licenses/" class="externalLink" title="License">License</a>
            </li>
                                                                    <li class="collapsed">
                          <a href="../../components.html" title="Components">Components</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../../sandbox/index.html" title="Sandbox">Sandbox</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../../dormant/index.html" title="Dormant">Dormant</a>
                  </li>
          </ul>
                       <h5>General Information</h5>
                  <ul>
                  <li class="none">
                          <a href="../../volunteering.html" title="Volunteering">Volunteering</a>
            </li>
                  <li class="none">
                          <a href="../../patches.html" title="Contributing Patches">Contributing Patches</a>
            </li>
                  <li class="none">
                          <a href="../../building.html" title="Building Components">Building Components</a>
            </li>
                  <li class="none">
                          <a href="../../releases/index.html" title="Releasing Components">Releasing Components</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">Wiki</a>
            </li>
          </ul>
                       <h5>ASF</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">How the ASF works</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">Get Involved</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">Developer Resources</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a>
            </li>
          </ul>
                                                                                                                   <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="poweredBy">
        <img class="poweredBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="poweredBy">
        <img class="poweredBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                       
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->

 
    <div class="section"><h2>File Systems<a name="File_Systems"></a></h2>
      <p>
        In its default mode of operation Commons Configuration supports retrieving and storing
        configuration files either on a local file system or via http. However, Commons
        Configuration provides support for allowing other File System adapters. All file
        access is accomplished through the <tt>FileSystem</tt> interface so accessing files
        using other mechanisms is possible.
      </p>
      <p>
        Commons Configuration also provides a second FileSystem which allows retrieval using
        <a class="externalLink" href="http://commons.apache.org/vfs">Apache Commons VFS</a>. As of this writing
        Commons VFS supports 18 protocols for manipulating files.
      </p>
      <div class="section"><h3>Configuration<a name="Configuration"></a></h3>
      <p>
        The FileSystem used by Commons Configuration can be set in one of several ways:
        </p><ol style="list-style-type: decimal">
          <li>A system property named &quot;org.apache.commons.configuration.filesystem&quot; can be defined
          with the full class name of the desired <tt>FileSystem</tt> implementation to set the
          default <tt>FileSystem</tt>.</li>
          <li><tt>FileSystem.setDefaultFilesystem()</tt> can be called to directly set the
          default <tt>FileSystem</tt> implementation.</li>
          <li><tt>DefaultConfigurationBuilder.setFileSystem()</tt> can be called to set the
          FileSystem implementation. <tt>DefaultConfiguratonBuilder</tt> will use this for each
          configuration it creates</li>
          <li><tt>DefaultConfigurationBuilder</tt> can be configured with the <tt>FileSystem</tt>
          to be used when creating each of the configurations.</li>
          <li>Each Configuration referenced in <tt>DefaultConfigurationBuilder's</tt>
          configuration can be configured with the <tt>FileSystem</tt> to use for that
          configuration.</li>
          <li>Call setFileSystem() directly on any Configuration that implements <tt>FileSystemBased.</tt>
          Both <tt>AbstractFileConfiguration</tt> and <tt>AbstractHierarchicalFileConfiguration</tt>
          implement <tt>FileSystemBased</tt></li>
        </ol>
      
      <p>
        The example that follows shows how to add <tt>FileSystem</tt> configuration to
        <tt>DefaultConfigurationBuilder</tt>.
      </p>
     <div class="source"><pre>
&lt;configuration&gt;
  &lt;header&gt;
    &lt;result delimiterParsingDisabled=&quot;true&quot; forceReloadCheck=&quot;true&quot;&gt;
      &lt;expressionEngine config-class=&quot;org.apache.commons.configuration.tree.xpath.XPathExpressionEngine&quot;/&gt;
    &lt;/result&gt;
    &lt;fileSystem config-class=&quot;org.apache.commons.configuration.VFSFileSystem&quot;/&gt;
  &lt;/header&gt;
  &lt;override&gt;
    &lt;xml fileName=&quot;settings.xml&quot; config-name=&quot;xml&quot;&gt;
      &lt;fileSystem config-class=&quot;org.apache.commons.configuration.DefaultFileSystem&quot;/&gt;
    &lt;/xml&gt;
  &lt;/override&gt;
&lt;/configuration&gt;
</pre></div>
      </div>
      <div class="section"><h3>File Options Provider<a name="File_Options_Provider"></a></h3>
        <p>
          Commons VFS allows options to the underlying file systems being used. Commons Configuration
          allows applications to provide these by implementing the <tt>FileOptionsProvider</tt> interface
          and registering the provider with the <tt>FileSystem</tt>. <tt>FileOptionsProvider</tt>
          has a single method that must be implemented, <tt>getOptions</tt>, which returns a Map
          containing the keys and values that the <tt>FileSystem</tt> might use. The getOptions
          method is called as each configuration uses VFS to create a <tt>FileOjbect</tt> to
          access the file. The map returned does not have to contain the same keys and/or values
          each time it is called. For example, the value of the <tt>currentUser</tt> key can be
          set to the id of the currently logged in user to allow a WebDAV save to record the userid
          as a file attribute.
        </p>
      </div>
      <div class="section"><h3>File Reloading Strategy<a name="File_Reloading_Strategy"></a></h3>
        <p>
          The <tt><a href="../apidocs/org/apache/commons/configuration/reloading/VFSFileChangedReloadingStrategy.html">VFSFileChangedReloadingStrategy</a></tt>
          can be used to cause Configurations accessed via the <tt>VFSFileSystem</tt> to be
          monitored and reloaded when the files are modified. The example below shows how
          <tt>DefaultConfigurationBuilder</tt> can be configured to use
          <tt>VFSFilChangedReloadingStrategy</tt>.
          In the example below both test.properties and settings.xml would be checked for changes
          once per minute.
        </p>
       <div class="source"><pre>
&lt;configuration&gt;
  &lt;header&gt;
    &lt;result delimiterParsingDisabled=&quot;true&quot; forceReloadCheck=&quot;true&quot;&gt;
      &lt;expressionEngine config-class=&quot;org.apache.commons.configuration.tree.xpath.XPathExpressionEngine&quot;/&gt;
    &lt;/result&gt;
    &lt;fileSystem config-class=&quot;org.apache.commons.configuration.VFSFileSystem&quot;/&gt;
  &lt;/header&gt;
  &lt;override&gt;
    &lt;properties fileName=&quot;test.properties&quot; throwExceptionOnMissing=&quot;true&quot;&gt;
      &lt;reloadingStrategy refreshDelay=&quot;60000&quot;
        config-class=&quot;org.apache.commons.configuration.reloading.VFSFileChangedReloadingStrategy&quot;/&gt;
    &lt;/properties&gt;
    &lt;xml fileName=&quot;settings.xml&quot; config-name=&quot;xml&quot;&gt;
      &lt;reloadingStrategy refreshDelay=&quot;60000&quot;
         config-class=&quot;org.apache.commons.configuration.reloading.VFSFileChangedReloadingStrategy&quot;/&gt;
    &lt;/xml&gt;
  &lt;/override&gt;
&lt;/configuration&gt;
</pre></div>
      </div>
    </div>




      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="center">Copyright &#169;                    2001-2012
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.      
                
      </div>
                          
<div class="center">Apache Commons, Apache Commons Configuration, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
