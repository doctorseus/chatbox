<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Aug 4, 2012 ( $Revision: 1080083 $ ) -->
<!-- $HeadURL: https://svn.apache.org/repos/asf/commons/proper/commons-skin/trunk/src/main/resources/META-INF/maven/site.vm $ -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>
  Composite Configuration Details</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
      <meta name="author" content="Eric Pugh" />
    <meta name="Date-Revision-yyyymmdd" content="20120804" />
    <meta http-equiv="Content-Language" content="en" />
                                                    
<link rel="stylesheet" type="text/css" media="all" href="../css/prettify.css"/>                                                        
<script src="../js/prettify.js" type="text/javascript"></script>                                                        
<script type="text/javascript">window.onload=function() {
            prettyPrint();
        }</script>                      
        </head>
  <body class="composite">
    <div id="banner">
            <div id="bannerLeft">
                                            <a href="http://commons.apache.org/" title="Apache Commons logo">
                                        <img src="../images/commons-logo.png" alt="Apache Commons logo"/>
                </a>
            </div><!-- id="bannerLeft" -->
              <div id="bannerRight">
                                                          <a href="../index.html">
                                                <img src="../images/logo.png" alt="Commons Configuration"/>
                </a>
            </div><!-- id="bannerRight" -->
        <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                <div class="xleft">
        <span id="publishDate">Last Published: 04 August 2012</span>
                  &nbsp;| <span id="projectVersion">Version: 1.9</span>
                      </div>
            <div class="xright">                    <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">ApacheCon</a>
            |
                        <a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a>
            |
                        <a href="../../" title="Commons">Commons</a>
              
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Configuration</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../download_configuration.cgi" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../changes-report.html" title="Release History">Release History</a>
            </li>
                  <li class="none">
                          <a href="../userguide/user_guide.html" title="User's Guide">User's Guide</a>
            </li>
                  <li class="none">
                          <a href="../dependencies.html" title="Runtime Dependencies">Runtime Dependencies</a>
            </li>
                  <li class="none">
                          <a href="../apidocs/index.html" title="Javadoc">Javadoc</a>
            </li>
          </ul>
                       <h5>Development</h5>
                  <ul>
                  <li class="none">
                          <a href="../building.html" title="Building">Building</a>
            </li>
                  <li class="none">
                          <a href="../issue-tracking.html" title="Issue Tracking">Issue Tracking</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                    <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Commons</h5>
                  <ul>
                  <li class="none">
                          <a href="../../" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/licenses/" class="externalLink" title="License">License</a>
            </li>
                                                                    <li class="collapsed">
                          <a href="../../components.html" title="Components">Components</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../../sandbox/index.html" title="Sandbox">Sandbox</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../../dormant/index.html" title="Dormant">Dormant</a>
                  </li>
          </ul>
                       <h5>General Information</h5>
                  <ul>
                  <li class="none">
                          <a href="../../volunteering.html" title="Volunteering">Volunteering</a>
            </li>
                  <li class="none">
                          <a href="../../patches.html" title="Contributing Patches">Contributing Patches</a>
            </li>
                  <li class="none">
                          <a href="../../building.html" title="Building Components">Building Components</a>
            </li>
                  <li class="none">
                          <a href="../../releases/index.html" title="Releasing Components">Releasing Components</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">Wiki</a>
            </li>
          </ul>
                       <h5>ASF</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">How the ASF works</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">Get Involved</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">Developer Resources</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a>
            </li>
          </ul>
                                                                                                                   <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="poweredBy">
        <img class="poweredBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="poweredBy">
        <img class="poweredBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                       
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->

 

    <div class="section"><h2>Composite Configuration Details<a name="Composite_Configuration_Details"></a></h2>
        <p>
            There are many use cases when you want to collect the properties
            of several configuration sources and access them like a single
            configuration object. One way to do that is using the
            <tt><a href="../apidocs/org/apache/commons/configuration/CompositeConfiguration.html">
            CompositeConfiguration</a></tt> class.
        </p>
        <p>
            A <tt>CompositeConfiguration</tt> object contains a list of
            other configuration objects. When properties are accessed from a
            composite configuration the object takes the passed in property key
            and iterates over the list of the contained configurations. As soon
            as a value is found for the key it is returned. This means that a
            <tt>CompositeConfiguration</tt> implements a kind of override
            semantics, i.e. the properties of configurations that were added
            first hide the property values of configurations added later.
        </p>
    	<p>
    		We will discuss how you can establish a &quot;default&quot; choice for your
    		Composite Configuration as well as save changes made to your
    		Composite Configuration.
    	</p>
    	<div class="section"><h3>Setting Up Defaults<a name="Setting_Up_Defaults"></a></h3>
    		<p>
    			Defaults are very simple.  You can just add them as your last configuration object, 
    			either through the ConfigurationFactory or manually:
    		</p>
    			<div class="source"><pre>
Configuration defaults = new PropertiesConfiguration(fileToDefaults);
Configuration otherProperties = new PropertiesConfiguration(fileToOtherProperties);
CompositeConfiguration cc = new CompositeConfiguration();
cc.addConfiguration(otherProperties);
cc.addConfiguration(fileToDefaults);
</pre></div>
		</div>
		
		<div class="section"><h3>Saving Changes<a name="Saving_Changes"></a></h3>
			<p>
				If you have a non static Configuration where you want to 
				save changes made to a configuration, and you are using a
				CompositeConfiguration, then you will need to pass into
				the constructor of the CompositeConfiguration what Configuration
				to save the changes via.
			</p>
    			<div class="source"><pre>
PropertiesConfiguration saveConfiguration = new PropertiesConfiguration(fileToSaveChangesIn);
Configuration cc = new CompositeConfiguration(saveConfiguration);
cc.setProperty(&quot;newProperty&quot;,&quot;new value&quot;);

saveConfiguration.save();
</pre></div>
			<p>
				Alternatively, you can just request the
				in-memory configuration that stores the changes. The following
                example fragment copies all properties from the in-memory
                configuration into a <tt>DatabaseConfiguration</tt>, so
                that they are made persistent:
    			</p><div class="source"><pre>
Configuration changes = myCompositeConfiguration.getInMemoryConfiguration();
DatabaseConfiguration config = new DatabaseConfiguration(datasource, &quot;configuration&quot;, &quot;key&quot;, &quot;value&quot;);
for (Iterator&lt;String&gt; i = changes.getKeys(); i.hasNext()){
	String key = i.next();
	Object value = changes.get(key);
	config.setProperty(key,value);
}
</pre></div>
			

		</div>
	</div>



      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="center">Copyright &#169;                    2001-2012
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.      
                
      </div>
                          
<div class="center">Apache Commons, Apache Commons Configuration, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
